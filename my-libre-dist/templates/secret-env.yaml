{{- $fullName := include "fullname" . }}
{{- $secretName := printf "%s-secret" $fullName }}
{{- $oldSecret := (lookup "v1" "Secret" .Release.Namespace $secretName) -}}
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: {{ $secretName }}
  labels:
    {{- include "labels" . | nindent 4 }}
data:
  DB_PASSWORD: {{ b64enc (vault "secret/public-secret/librenms" "data.db") }}
  REDIS_PASSWORD: {{ b64enc (vault "secret/public-secret/librenms" "data.redis") }}
  APP_KEY: {{ b64enc (vault "secret/public-secret/librenms" "data.appkey") }}
